<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>福瑞交流空间 - 服务器状态监控</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        status: {
                            normal: '#10B981', // 正常运行-绿色
                            maintain: '#F59E0B', // 保养-黄色
                            repair: '#EF4444' // 检修-红色
                        }
                    },
                    borderRadius: {
                        'xl': '1rem'
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .status-badge {
                @apply inline-flex items-center gap-2 px-4 py-2 rounded-xl font-medium text-sm;
            }
            .admin-btn {
                @apply w-full py-3 rounded-xl font-medium transition-all hover:shadow-md;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans text-gray-800">
    <!-- 普通用户界面（默认显示） -->
    <div id="normal-screen" class="container mx-auto px-4 py-8 max-w-md">
        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
            <h1 class="text-2xl font-bold mb-6 text-center">服务器状态监控</h1>
            
            <!-- 服务器状态显示区 -->
            <div class="mb-8 text-center">
                <p class="text-gray-500 mb-3">当前服务器状态：</p>
                <!-- 状态徽章（默认正常运行，会根据本地存储更新） -->
                <div id="server-status" class="status-badge bg-status-normal/10 text-status-normal mx-auto">
                    <<i class="fa fa-check-circle"></</i>
                    <span>正常运行</span>
                </div>
            </div>
            
            <!-- 隐藏的管理员密码输入（仅监听键盘输入，无视觉显示） -->
            <input type="hidden" id="admin-code-input" placeholder="输入管理员密码" maxlength="6">
            <p class="text-xs text-gray-400 text-center mt-10">© 2024 福瑞交流空间</p>
        </div>
    </div>

    <!-- 管理员界面（默认隐藏） -->
    <div id="admin-screen" class="hidden container mx-auto px-4 py-8 max-w-md">
        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-bold">管理员控制台</h1>
                <button id="back-btn" class="text-gray-500 hover:text-gray-700 transition-colors">
                    <<i class="fa fa-arrow-left"></</i> 返回
                </button>
            </div>
            
            <!-- 状态设置标题 -->
            <p class="text-gray-500 mb-4">设置服务器状态：</p>
            
            <!-- 三个状态选项按钮 -->
            <div class="flex flex-col gap-3 mb-8">
                <button id="set-normal" class="admin-btn bg-status-normal/10 text-status-normal hover:bg-status-normal/20">
                    <<i class="fa fa-check-circle mr-2"></</i> 正常运行
                </button>
                <button id="set-maintain" class="admin-btn bg-status-maintain/10 text-status-maintain hover:bg-status-maintain/20">
                    <<i class="fa fa-wrench mr-2"></</i> 保养中
                </button>
                <button id="set-repair" class="admin-btn bg-status-repair/10 text-status-repair hover:bg-status-repair/20">
                    <<i class="fa fa-exclamation-triangle mr-2"></</i> 检修中
                </button>
            </div>
            
            <!-- 操作提示 -->
            <div class="text-xs text-gray-400 text-center">
                <p>设置后状态将实时同步到普通界面</p>
            </div>
        </div>
    </div>

    <script>
        // 1. DOM元素获取
        const normalScreen = document.getElementById('normal-screen');
        const adminScreen = document.getElementById('admin-screen');
        const serverStatusBadge = document.getElementById('server-status');
        const adminCodeInput = document.getElementById('admin-code-input');
        const backBtn = document.getElementById('back-btn');
        // 管理员状态设置按钮
        const setNormalBtn = document.getElementById('set-normal');
        const setMaintainBtn = document.getElementById('set-maintain');
        const setRepairBtn = document.getElementById('set-repair');

        // 2. 核心配置
        const ADMIN_CODE = '880226'; // 管理员密码
        let inputCode = ''; // 存储用户输入的密码

        // 3. 初始化：从本地存储读取服务器状态（页面刷新不丢失）
        function initServerStatus() {
            const savedStatus = localStorage.getItem('serverStatus') || 'normal';
            updateStatusDisplay(savedStatus);
        }

        // 4. 更新状态显示（普通界面+本地存储）
        function updateStatusDisplay(status) {
            // 清除原有样式和内容
            serverStatusBadge.className = 'status-badge mx-auto';
            serverStatusBadge.innerHTML = '';

            // 根据状态设置样式和内容
            switch(status) {
                case 'normal':
                    serverStatusBadge.classList.add('bg-status-normal/10', 'text-status-normal');
                    serverStatusBadge.innerHTML = '<<i class="fa fa-check-circle"></</i><span>正常运行</span>';
                    break;
                case 'maintain':
                    serverStatusBadge.classList.add('bg-status-maintain/10', 'text-status-maintain');
                    serverStatusBadge.innerHTML = '<<i class="fa fa-wrench"></</i><span>保养中</span>';
                    break;
                case 'repair':
                    serverStatusBadge.classList.add('bg-status-repair/10', 'text-status-repair');
                    serverStatusBadge.innerHTML = '<<i class="fa fa-exclamation-triangle"></</i><span>检修中</span>';
                    break;
            }

            // 保存状态到本地存储
            localStorage.setItem('serverStatus', status);
        }

        // 5. 监听全局键盘输入（普通界面输入密码）
        document.addEventListener('keydown', (e) => {
            // 只有在普通界面时才监听密码输入
            if (normalScreen.classList.contains('hidden')) return;

            // 只监听数字键（0-9）
            if (e.key >= '0' && e.key <= '9') {
                inputCode += e.key;
                // 密码长度达到6位时验证
                if (inputCode.length === 6) {
                    if (inputCode === ADMIN_CODE) {
                        // 密码正确：切换到管理员界面
                        normalScreen.classList.add('hidden');
                        adminScreen.classList.remove('hidden');
                    }
                    // 无论正确与否，重置输入（避免重复验证）
                    inputCode = '';
                }
            } else if (e.key === 'Backspace') {
                // 支持退格键删除输入
                inputCode = inputCode.slice(0, -1);
            }
        });

        // 6. 管理员界面：状态设置按钮事件
        setNormalBtn.addEventListener('click', () => updateStatusDisplay('normal'));
        setMaintainBtn.addEventListener('click', () => updateStatusDisplay('maintain'));
        setRepairBtn.addEventListener('click', () => updateStatusDisplay('repair'));

        // 7. 管理员界面：返回普通界面
        backBtn.addEventListener('click', () => {
            adminScreen.classList.add('hidden');
            normalScreen.classList.remove('hidden');
            inputCode = ''; // 重置密码输入
        });

        // 8. 页面加载时初始化状态
        window.addEventListener('load', initServerStatus);
    </script>
</body>
</html>
